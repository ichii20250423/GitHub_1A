<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8"/>
    <title>Gamedev Canvas Workshop</title>
    <style>
        *{
            padding:0;
            margin:0;
        }
        canvas
        {
            background:#eee;
            display:block;
            margin:0 auto;
        }
    </style>

</head>

<body>
    <canvas id="myCanvas" width="480" height="320"></canvas>
    <!--描画領域　id="名前" width=幅px height=高さpx-->

    <script>
    const canvas = document.getElementById("myCanvas");
    //document(このファイル)からIDが"myCanvas"になっている要素(Element)を取得
    const ctx = canvas.getContext("2d");
    //canvasから2D描画用のコンテキスト(描画用の設定が詰まったもの)を取得

    //図形を描画するプログラム(beginPath()とclosePath()で囲む)
    ctx.beginPath();
    ctx.rect(20, 40, 50, 50);
    //rect(左側のx座標(px), 上側のy座標(px), 横幅(px), 縦幅(px))
    //矩形・四角形(rectangle)を描画する関数
    ctx.fillStyle = "#FF0000";  //RRGGBB
    //塗りつぶしの色を設定
    ctx.fill();
    //図形の塗りつぶしを実行
    ctx.closePath();

    ctx.beginPath();
    ctx.arc(240, 160, 20, 0, Math.PI * 2, false);
    //円弧(arc)を描画する(中心x座標, 中心y座標, 半径, 開始角度, 終了角度, 時計回り)
    //※プログラムで角度を扱う場合は、Degree(360)ではなく、Radian(2*PI)を使うことが多い
    ctx.fillStyle = "green";
    ctx.fill();
    ctx.closePath();

    ctx.beginPath();
    ctx.rect(160, 10, 100, 40);
    ctx.strokeStyle = "rgba(0, 0, 255, 0.5)";
    //線描画の色を設定(※半透明(Alpha)の指定がある)
    ctx.stroke();
    //図形の輪郭を描画
    ctx.closePath();

    //変数(Variable)の宣言(declaration)
    let x = canvas.width / 2;
    let y = canvas.height-30;
    let dx = 2;     //xの差分(differencial, delta)
    let dy = -2;
    const ballRadius = 10;  //定数(Constant)

    const paddleHeight = 10;
    const paddleWidth = 75;
    let paddleX = (canvas.width - paddleWidth) / 2;

    let rightPressed = false;
    let leftPressed = false;

    //イベント(キー入力)が発生したことを検出できるようにする
    document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);

    function keyDownHandler(e)
    {

    }
    function keyUpHandler(e)
    {
        
    }

    function drawPaddle()
    {
        ctx.beginPath();
        ctx.rect(paddleX, canvas.height - paddleHeight,
            paddleWidth, paddleHeight);
        ctx.fillStyle = "#0095DD";  //RRGGBB
        ctx.fill();
        ctx.closePath();
    }

    function drawBall()
    {
        ctx.beginPath();
        ctx.arc(x, y, ballRadius, 0, Math.PI*2);
        ctx.fillStyle = "#0095DD";
        ctx.fill();
        ctx.closePath();
    }
    
    //関数(function)の定義(definition)
    function draw()
    {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        //矩形の範囲を消去(左, 上, 幅, 高さ)
        
        drawBall(); //関数の呼び出し・実行
        drawPaddle();

        //ボールの画面左右の衝突検出(Collision Detection)
        if(x + dx > canvas.width - ballRadius || x + dx < ballRadius)
        {   //跳ね返る(移動方向が逆転)
            dx = -dx;
        }
        if(y + dy > canvas.height - ballRadius || y + dy < ballRadius)
        {
            dy = -dy;
        }

        x += dx;    //x = x + dx;
        y += dy;
        
    }
    //関数を実行
    setInterval(draw, 10);
    //draw関数を一定間隔(10ミリ秒)で実行し続ける

    </script>
</body>

</html>


コードを整える
リファクタリング(refactering)

手続き型(procedual) : 上から1行ずつ実行される
イベント駆動型(event driven) : イベントが起こるとそこに対するプログラムが実行される

